{"version":3,"sources":["webpack:///./src/pages/Watermark.vue","webpack:///./src/hooks/watermark.ts","webpack:///./src/pages/Watermark.vue?3b01","webpack:///./src/pages/Watermark.vue?9c3d"],"names":["class","addWatermark","type","useWatermark","watermark","setWatermark","str","id","document","getElementById","body","removeChild","can","createElement","width","height","cans","getContext","rotate","Math","PI","font","fillStyle","textAlign","textBaseline","fillText","div","style","pointerEvents","top","left","position","zIndex","documentElement","clientWidth","clientHeight","background","toDataURL","appendChild","setInterval","window","addEventListener","name","components","props","setup","ctx","data","render"],"mappings":"sKACsE,Q,+BACjB,Q,qJADnD,yBAAmF,GAAzEA,MAAM,OAAQ,QAAK,+BAAE,EAAAC,aAAY,UAAUC,KAAK,W,+BAAU,iBAAI,C,YACxE,yBAAkE,GAAvD,QAAK,+BAAE,EAAAD,aAAY,MAAMC,KAAK,W,+BAAU,iBAAI,C,iCCF5CC,EAAe,WAC1B,IAAIC,EAAiC,CACnCC,aAAc,MAEZA,EAAe,SAACC,GAClB,IAAIC,EAAK,0BAC2B,OAAhCC,SAASC,eAAeF,IAC1BC,SAASE,KAAKC,YAAYH,SAASC,eAAeF,IAGpD,IAAIK,EAAMJ,SAASK,cAAc,UAEjCD,EAAIE,MAAQ,IACZF,EAAIG,OAAS,IAEb,IAAIC,EAAOJ,EAAIK,WAAW,MAE1BD,EAAKE,QAAQ,GAAKC,KAAKC,GAAK,KAC5BJ,EAAKK,KAAO,cAEZL,EAAKM,UAAY,4BAEjBN,EAAKO,UAAY,OAEjBP,EAAKQ,aAAe,SAEpBR,EAAKS,SAASnB,EAAKM,EAAIE,MAAQ,EAAGF,EAAIG,OAAS,GAE/C,IAAIW,EAAMlB,SAASK,cAAc,OAWjC,OAVAa,EAAInB,GAAKA,EACTmB,EAAIC,MAAMC,cAAgB,OAC1BF,EAAIC,MAAME,IAAM,OAChBH,EAAIC,MAAMG,KAAO,MACjBJ,EAAIC,MAAMI,SAAW,QACrBL,EAAIC,MAAMK,OAAS,SACnBN,EAAIC,MAAMb,MAAQN,SAASyB,gBAAgBC,YAAc,KACzDR,EAAIC,MAAMZ,OAASP,SAASyB,gBAAgBE,aAAe,KAC3DT,EAAIC,MAAMS,WAAa,OAASxB,EAAIyB,UAAU,aAAe,oBAC7D7B,SAASE,KAAK4B,YAAYZ,GACnBnB,GAaT,OAXAH,EAAUC,aAAe,SAACC,GACxB,IAAIC,EAAKF,EAAaC,GACtBiC,aAAY,WAC0B,OAAhC/B,SAASC,eAAeF,KAC1BA,EAAKF,EAAaC,MAEnB,KACHkC,OAAOC,iBAAiB,UAAU,WAChCpC,EAAaC,OAGV,CACLD,iBC7CW,+BAAgB,CAC7BqC,KAAM,GACNC,WAAY,GACZC,MAAO,GACPC,MAJ6B,SAIvBD,EAAOE,GAAiB,MACP3C,IAAhBE,EADuB,EACvBA,aACD0C,EAAa,sBAAe,IAC5B9C,EAAe,SAACK,GAClBD,EAAaC,IAEf,wCACK,oBAAOyC,IADZ,IAEE9C,oBCjBN,EAAO+C,OAASA,EAED","file":"js/chunk-2d21dfd5.9b82ee80.js","sourcesContent":["<template>\r\n  <a-button class=\"mr-2\" @click=\"addWatermark('我是水印')\" type=\"primary\">增加水印</a-button>\r\n  <a-button @click=\"addWatermark('')\" type=\"primary\">取消水印</a-button>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, reactive, toRefs, SetupContext} from 'vue'\r\nimport {useWatermark} from \"@/hooks/watermark\"\r\n\r\ninterface Data {\r\n\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"\",\r\n  components: {},\r\n  props: {},\r\n  setup(props, ctx: SetupContext) {\r\n    let {setWatermark} = useWatermark()\r\n    let data: Data = reactive<Data>({})\r\n    let addWatermark = (str: string) => {\r\n      setWatermark(str)\r\n    }\r\n    return {\r\n      ...toRefs(data),\r\n      addWatermark\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"scss\"></style>\r\n","export const useWatermark = () => {\n  let watermark: {setWatermark: any} = {\n    setWatermark: null\n  }\n  let setWatermark = (str: string) => {\n    let id = '1.23452384164.123412416'\n    if (document.getElementById(id) !== null) {\n      document.body.removeChild(document.getElementById(id)!)\n    }\n    //创建一个画布\n    let can = document.createElement('canvas')\n    //设置画布的长宽\n    can.width = 120\n    can.height = 120\n\n    let cans = can.getContext('2d')!\n    //旋转角度\n    cans.rotate(-15 * Math.PI / 180)\n    cans.font = '18px Vedana'\n    //设置填充绘画的颜色、渐变或者模式\n    cans.fillStyle = 'rgba(200, 200, 200, 0.40)'\n    //设置文本内容的当前对齐方式\n    cans.textAlign = 'left'\n    //设置在绘制文本时使用的当前文本基线\n    cans.textBaseline = 'middle'\n    //在画布上绘制填色的文本（输出的文本，开始绘制文本的X坐标位置，开始绘制文本的Y坐标位置）\n    cans.fillText(str, can.width / 8, can.height / 2)\n\n    let div = document.createElement('div')\n    div.id = id\n    div.style.pointerEvents = 'none'\n    div.style.top = '30px'\n    div.style.left = '0px'\n    div.style.position = 'fixed'\n    div.style.zIndex = '100000'\n    div.style.width = document.documentElement.clientWidth + 'px'\n    div.style.height = document.documentElement.clientHeight + 'px'\n    div.style.background = 'url(' + can.toDataURL('image/png') + ') left top repeat'\n    document.body.appendChild(div)\n    return id\n  }\n  watermark.setWatermark = (str: string) => {\n    let id = setWatermark(str)\n    setInterval(() => {\n      if (document.getElementById(id) === null) {\n        id = setWatermark(str)\n      }\n    }, 500)\n    window.addEventListener('resize', () => {\n      setWatermark(str)\n    })\n  }\n  return {\n    setWatermark\n  }\n}\n","\r\nimport {defineComponent, reactive, toRefs, SetupContext} from 'vue'\r\nimport {useWatermark} from \"@/hooks/watermark\"\r\n\r\ninterface Data {\r\n\r\n}\r\n\r\nexport default defineComponent({\r\n  name: \"\",\r\n  components: {},\r\n  props: {},\r\n  setup(props, ctx: SetupContext) {\r\n    let {setWatermark} = useWatermark()\r\n    let data: Data = reactive<Data>({})\r\n    let addWatermark = (str: string) => {\r\n      setWatermark(str)\r\n    }\r\n    return {\r\n      ...toRefs(data),\r\n      addWatermark\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./Watermark.vue?vue&type=template&id=fb259862&bindings={}\"\nimport script from \"./Watermark.vue?vue&type=script&lang=ts\"\nexport * from \"./Watermark.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}